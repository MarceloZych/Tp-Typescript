extends ./layout

block contenido
    .flex.justify-end.mb-4
        ul.flex.space-x-4
            li
                a(href="/cursos/crearCrusos" class="text-green-600 hover:text-green-800") Agregar Curso
    
    .py-10
        h1.text-4xl.my-10.font-extrabold.text-center Proyecto
            span.font-normal Universidad
        h2.text-center.text-2xl.font-extrabold= pagina
      
        table.table-auto.w-full.mt-4
            thead
                tr
                    th.text-left.text-gray-500.uppercase.px-6.py-3 Nombre
                    th.text-left.text-gray-500.uppercase.px-6.py-3 descripcion
                    th.text-left.text-gray-500.uppercase.px-6.py-3 profesor
                    th.text-left.text-gray-500.uppercase.px-6.py-3 Estudiantes Inscriptos
            tbody
                each cursos in listaCursos || []
                    tr
                        td.px-6.py-4= cursos.nombre
                        td.px-6.py-4= cursos.descripcion
                        td.px-6.py-4= cursos.profesor ? cursos.profesor.nombre : 'Sin Profesor'
                        td.px-6.py-4
                            if cursos.estudiantes.length > 0
                                each estudiante in cursos.estudiantes || []
                                    p= estudiante.nombre
                            else
                                p No hay estudiantes inscritos.
                        td.px--6.py--4
                            a.text-blue-500(href=`/cursos/modificarCurso/${cursos.id}`) Editar
                            a.text-red-500.ml-2(href="#", onclick=`eliminarCruso('${cursos.id}')`) Eliminar

block scripts
    script.
        function eliminarCurso(id) {
            if (confirm('¿Estás seguro de que deseas eliminar este curso?')) {
                fetch(`/cursos/${id}`, {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(data => {
                    if (data.mensaje === 'Curso eliminado') {
                        alert('Curso eliminado con éxito.');
                        window.location.reload(); 
                    } else {
                        alert(data.mensaje); 
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('Error al eliminar el curso.');
                });
            }
        }